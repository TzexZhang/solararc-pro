# SolarArc Pro

> é«˜æ€§èƒ½åŸå¸‚æ—¶ç©ºæ—¥ç…§åˆ†æä¸è§†è§‰ä»¿çœŸå¹³å°

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.10+-green.svg)
![React](https://img.shields.io/badge/react-18+-blue.svg)

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

SolarArc Pro æ˜¯ä¸€ä¸ªä¸ºåŸå¸‚è§„åˆ’å¸ˆã€å»ºç­‘å¸ˆå’Œå¼€å‘å•†è®¾è®¡çš„é«˜ç²¾åº¦æ—¥ç…§åˆ†æå·¥å…·ã€‚é€šè¿‡ç§‘å­¦ç®—æ³•è®¡ç®—å»ºç­‘é˜´å½±ã€è¯„ä¼°é‡‡å…‰æƒï¼Œä¸ºåŸå¸‚å»ºè®¾å†³ç­–æä¾›æ•°æ®æ”¯æŒã€‚

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

- â˜€ï¸ **é«˜ç²¾åº¦å¤ªé˜³ä½ç½®è®¡ç®—** - ä½¿ç”¨pvlibåº“ï¼Œè¯¯å·®æ§åˆ¶åœ¨è§’åº¦ç§’çº§
- ğŸŒ‘ **å®æ—¶é˜´å½±è®¡ç®—** - Shadow Volumeç®—æ³•ï¼Œæ”¯æŒå¤æ‚å»ºç­‘å½¢çŠ¶
- ğŸ“Š **æ—¥ç…§åˆ†æ** - æœ‰æ•ˆæ—¥ç…§æ—¶é•¿ç»Ÿè®¡ã€é˜´å½±é‡å åˆ†æ
- ğŸ—ºï¸ **å¤šåæ ‡ç³»æ”¯æŒ** - WGS84/GCJ-02/BD09ç›¸äº’è½¬æ¢
- ğŸ¨ **3Då¯è§†åŒ–** - åŸºäºMapbox GL JS + Deck.glçš„é«˜æ€§èƒ½æ¸²æŸ“
- ğŸ“… **æ—¶é—´è½´åŠ¨ç”»** - 24å°æ—¶æ—¥ç…§å˜åŒ–åŠ¨ç”»æ¼”ç¤º
- ğŸ‡¨ğŸ‡³ **å›½å†…ä¼˜åŒ–** - é«˜å¾·åœ°å›¾ã€ä¸­å›½æ—¶åŒºã€ä¸­æ–‡ç•Œé¢

### ğŸ¯ é€‚ç”¨åœºæ™¯

- åŸå¸‚è§„åˆ’æ—¥ç…§è¯„ä¼°
- å»ºç­‘è®¾è®¡é‡‡å…‰åˆ†æ
- æˆ¿åœ°äº§å¼€å‘å¯è¡Œæ€§ç ”ç©¶
- é‡‡å…‰æƒçº çº·åˆ†æ
- ç§‘ç ”æ•™å­¦æ¼”ç¤º

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Python 3.10+** - æ ¸å¿ƒè¯­è¨€
- **FastAPI** - é«˜æ€§èƒ½Webæ¡†æ¶
- **MySQL 8.0** - å…³ç³»å‹æ•°æ®åº“ï¼ˆç©ºé—´ç´¢å¼•ï¼‰
- **pvlib** - å¤ªé˜³ä½ç½®ç®—æ³•åº“
- **Shapely** - ç©ºé—´å‡ ä½•è®¡ç®—
- **SQLAlchemy** - ORMæ¡†æ¶

### å‰ç«¯
- **React 18** - UIæ¡†æ¶
- **TypeScript** - ç±»å‹ç³»ç»Ÿ
- **Vite** - æ„å»ºå·¥å…·
- **Mapbox GL JS** - åœ°å›¾æ¸²æŸ“
- **Deck.gl** - 3Dæ•°æ®å¯è§†åŒ–
- **Zustand** - çŠ¶æ€ç®¡ç†
- **Ant Design** - UIç»„ä»¶åº“

### éƒ¨ç½²
- **Zeabur** - æ¨èéƒ¨ç½²å¹³å°ï¼ˆå›½å†…è®¿é—®å¿«ï¼‰
- **Docker** - å®¹å™¨åŒ–éƒ¨ç½²
- **GitHub Actions** - CI/CDè‡ªåŠ¨åŒ–

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.10+
- Node.js 18+
- MySQL 8.0+ (æˆ–ä½¿ç”¨Zeaburæ‰˜ç®¡æ•°æ®åº“)
- Git

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/solararc-pro.git
cd solararc-pro
```

### 2. åç«¯è®¾ç½®

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“ç­‰ä¿¡æ¯

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
uvicorn app.main:app --reload --port 8000
```

åç«¯APIæ–‡æ¡£: http://localhost:8000/docs

### 3. å‰ç«¯è®¾ç½®

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘.env.localæ–‡ä»¶ï¼Œé…ç½®APIåœ°å€ç­‰

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åœ°å€: http://localhost:5173

### 4. ä½¿ç”¨Dockerå¿«é€Ÿå¯åŠ¨

```bash
# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

---

## ğŸ“¦ éƒ¨ç½²åˆ°Zeabur

Zeaburæ˜¯å›½å†…è®¿é—®é€Ÿåº¦æœ€å¿«çš„PaaSå¹³å°ä¹‹ä¸€ï¼Œå®Œå…¨æ”¯æŒæœ¬é¡¹ç›®ã€‚

### å¿«é€Ÿéƒ¨ç½²

1. **æ³¨å†ŒZeabur**
   - è®¿é—® [zeabur.com](https://zeabur.com)
   - ä½¿ç”¨GitHubç™»å½•

2. **åˆ›å»ºé¡¹ç›®**
   - ç‚¹å‡» "New Project"
   - é€‰æ‹© "Import from GitHub"
   - é€‰æ‹©ä½ çš„ä»“åº“

3. **é…ç½®æœåŠ¡**
   - Zeaburä¼šè‡ªåŠ¨è¯†åˆ« `zeabur.yml` é…ç½®
   - é…ç½®ç¯å¢ƒå˜é‡ï¼ˆæ•°æ®åº“è¿æ¥ã€APIå¯†é’¥ç­‰ï¼‰
   - éƒ¨ç½²MySQLæ•°æ®åº“
   - éƒ¨ç½²åç«¯æœåŠ¡
   - éƒ¨ç½²å‰ç«¯æœåŠ¡

4. **è®¿é—®åº”ç”¨**
   - å‰ç«¯: `https://your-project.zeabur.app`
   - åç«¯: `https://your-backend.zeabur.app`

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·æŸ¥çœ‹: [Zeaburéƒ¨ç½²é…ç½®æŒ‡å—.md](./docs/Zeaburéƒ¨ç½²é…ç½®æŒ‡å—.md)

---

## ğŸ“– é¡¹ç›®ç»“æ„

```
solararc-pro/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®åº“æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/        # Pydantic Schema
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ main.py         # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ services/       # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ store/          # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ main.tsx        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ éœ€æ±‚è®¾è®¡æ–‡æ¡£.md
â”‚   â”œâ”€â”€ Zeaburéƒ¨ç½²é…ç½®æŒ‡å—.md
â”‚   â””â”€â”€ é…ç½®æ–‡ä»¶è¯´æ˜.md
â”‚
â”œâ”€â”€ scripts/                # è„šæœ¬
â”‚   â””â”€â”€ deploy.sh
â”‚
â”œâ”€â”€ docker-compose.yml      # Dockerç¼–æ’
â”œâ”€â”€ zeabur.yml             # Zeaburé…ç½®
â””â”€â”€ README.md
```

---

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

#### åç«¯ç¯å¢ƒå˜é‡ (`backend/.env`)
```env
# æ•°æ®åº“
DATABASE_URL=mysql+pymysql://user:pass@localhost:3306/solararc_pro

# APIé…ç½®
APP_NAME=SolarArc Pro
APP_ENV=development
DEBUG=false
LOG_LEVEL=INFO

# åœ°å›¾API
AMAP_API_KEY=your_amap_api_key

# å®‰å…¨
SECRET_KEY=your-secret-key-change-in-production
```

#### å‰ç«¯ç¯å¢ƒå˜é‡ (`frontend/.env.local`)
```env
# APIåœ°å€
VITE_API_BASE_URL=http://localhost:8000/api/v1

# é«˜å¾·åœ°å›¾
VITE_AMAP_KEY=your_amap_key
VITE_MAP_CENTER_LNG=116.397428
VITE_MAP_CENTER_LAT=39.90923

# é»˜è®¤åŸå¸‚
VITE_DEFAULT_CITY=åŒ—äº¬
```

### è·å–é«˜å¾·åœ°å›¾API Key

1. è®¿é—® [é«˜å¾·å¼€æ”¾å¹³å°](https://console.amap.com/dev/key/app)
2. æ³¨å†Œå¹¶ç™»å½•
3. åˆ›å»ºåº”ç”¨ï¼Œé€‰æ‹© "Webç«¯(JS API)"
4. è·å–Keyå¹¶é…ç½®åˆ°ç¯å¢ƒå˜é‡

---

## ğŸ“š APIæ–‡æ¡£

åç«¯APIæ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆï¼Œè®¿é—®ä»¥ä¸‹åœ°å€æŸ¥çœ‹ï¼š

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### ä¸»è¦APIç«¯ç‚¹

#### å»ºç­‘æ•°æ®
- `GET /api/v1/buildings/` - è·å–å»ºç­‘åˆ—è¡¨
- `GET /api/v1/buildings/{id}` - è·å–å»ºç­‘è¯¦æƒ…
- `POST /api/v1/buildings/` - åˆ›å»ºå»ºç­‘
- `POST /api/v1/buildings/import` - å¯¼å…¥å»ºç­‘æ•°æ®

#### å¤ªé˜³ä½ç½®
- `GET /api/v1/solar/position` - è®¡ç®—å¤ªé˜³ä½ç½®
- `GET /api/v1/solar/daily-positions` - è·å–24å°æ—¶å¤ªé˜³ä½ç½®
- `GET /api/v1/solar/sunrise-sunset` - è·å–æ—¥å‡ºæ—¥è½æ—¶é—´

#### é˜´å½±è®¡ç®—
- `POST /api/v1/shadows/calculate` - è®¡ç®—å»ºç­‘é˜´å½±
- `GET /api/v1/shadows/compare-extremes` - å¯¹æ¯”æç«¯æ—¥æœŸé˜´å½±
- `GET /api/v1/shadows/animation` - è·å–é˜´å½±åŠ¨ç”»æ•°æ®

#### æ—¥ç…§åˆ†æ
- `POST /api/v1/analysis/point-sunlight` - ç‚¹æ—¥ç…§åˆ†æ
- `POST /api/v1/analysis/shadow-overlap` - é˜´å½±é‡å åˆ†æ

#### åæ ‡è½¬æ¢
- `POST /api/v1/coords/transform` - åæ ‡è½¬æ¢
- `GET /api/v1/coords/detect/{lat}/{lng}` - æ£€æµ‹åæ ‡ç³»

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

```bash
# è¿è¡Œæµ‹è¯•
cd backend
pytest

# ä»£ç æ ¼å¼åŒ–
black app/
flake8 app/

# ç±»å‹æ£€æŸ¥
mypy app/
```

### å‰ç«¯å¼€å‘

```bash
# ä»£ç æ£€æŸ¥
cd frontend
npm run lint

# ç±»å‹æ£€æŸ¥
npm run type-check

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

### æ•°æ®åº“è¿ç§»

```bash
cd backend

# åˆ›å»ºè¿ç§»
alembic revision --autogenerate -m "description"

# æ‰§è¡Œè¿ç§»
alembic upgrade head

# å›æ»šè¿ç§»
alembic downgrade -1
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### åç«¯ä¼˜åŒ–
- ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± 
- ç©ºé—´ç´¢å¼•åŠ é€ŸæŸ¥è¯¢
- Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- å¼‚æ­¥ä»»åŠ¡å¤„ç†

### å‰ç«¯ä¼˜åŒ–
- ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰
- ç»„ä»¶æ‡’åŠ è½½
- å›¾åƒå‹ç¼©å’ŒWebPæ ¼å¼
- CDNåŠ é€Ÿé™æ€èµ„æº

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [https://github.com/yourusername/solararc-pro](https://github.com/yourusername/solararc-pro)
- é—®é¢˜åé¦ˆ: [GitHub Issues](https://github.com/yourusername/solararc-pro/issues)
- é‚®ç®±: support@solararc.pro

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š

- [FastAPI](https://fastapi.tiangolo.com/)
- [pvlib](https://pvlib-python.readthedocs.io/)
- [Shapely](https://shapely.readthedocs.io/)
- [React](https://react.dev/)
- [Mapbox GL JS](https://docs.mapbox.com/mapbox-gl-js)
- [Deck.gl](https://deck.gl/)
- [Ant Design](https://ant.design/)
- [Zeabur](https://zeabur.com/)

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-01-29)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- â˜€ï¸ å¤ªé˜³ä½ç½®è®¡ç®—åŠŸèƒ½
- ğŸŒ‘ é˜´å½±è®¡ç®—åŠŸèƒ½
- ğŸ“Š æ—¥ç…§åˆ†æåŠŸèƒ½
- ğŸ—ºï¸ 3Dåœ°å›¾å¯è§†åŒ–
- ğŸ‡¨ğŸ‡³ å›½å†…åœ°å›¾æ”¯æŒ

---

**SolarArc Pro** - è®©æ—¥ç…§åˆ†ææ›´ç®€å•ã€æ›´ç²¾å‡† ğŸŒ
