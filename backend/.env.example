# ============================================
# SolarArc Pro - 后端环境变量配置模板
# ============================================
# 使用方法：
# 1. 复制此文件为 .env
# 2. 填写实际的配置值
# 3. 不要将 .env 文件提交到Git

# ============================================
# 数据库配置
# ============================================
# MySQL数据库连接URL
DATABASE_URL=mysql+pymysql://solararc:solararc_pass_2026@localhost:3306/solararc_pro?charset=utf8mb4

# 数据库连接池配置
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=5
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ============================================
# Redis配置（可选）
# ============================================
# Redis连接URL
REDIS_URL=redis://localhost:6379/0

# Redis缓存过期时间（秒）
REDIS_CACHE_TTL=3600

# ============================================
# 应用配置
# ============================================
# 应用名称
APP_NAME=SolarArc Pro

# 应用环境 (development, production)
APP_ENV=development

# 调试模式
DEBUG=false

# 日志级别 (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# 服务器配置
API_HOST=0.0.0.0
API_PORT=8000

# 时区
TZ=Asia/Shanghai

# ============================================
# CORS配置
# ============================================
# 允许的跨域来源（逗号分隔）
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://localhost:5173

# 允许的跨域方法
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS

# 允许的跨域请求头
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# ============================================
# 安全配置
# ============================================
# JWT密钥（生产环境必须修改！）
SECRET_KEY=your-secret-key-change-in-production-please-use-openssl-rand-hex-32

# JWT算法
JWT_ALGORITHM=HS256

# Token过期时间（秒）
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================
# 地图API配置
# ============================================
# 高德地图API Key（国内使用）
# 申请地址：https://console.amap.com/dev/key/app
AMAP_API_KEY=your_amap_api_key_here

# 腾讯地图API Key（备用）
TENCENT_MAP_API_KEY=

# 百度地图API Key（备用）
BAIDU_MAP_API_KEY=

# ============================================
# 坐标系配置
# ============================================
# 默认坐标系 (WGS84, GCJ02, BD09)
DEFAULT_COORD_SYSTEM=GCJ02

# 是否自动转换坐标系
AUTO_TRANSFORM_COORDS=true

# ============================================
# 文件上传配置
# ============================================
# 最大上传大小（字节）
MAX_UPLOAD_SIZE=10485760

# 允许的文件类型（逗号分隔）
ALLOWED_FILE_TYPES=.geojson,.json,.shp,.kml,.csv

# 上传目录
UPLOAD_DIR=/app/uploads

# ============================================
# 日志配置
# ============================================
# 日志文件路径
LOG_FILE=/app/logs/app.log

# 日志文件最大大小（MB）
LOG_FILE_MAX_SIZE=100

# 日志文件备份数量
LOG_FILE_BACKUP_COUNT=10

# 是否输出到控制台
LOG_TO_CONSOLE=true

# ============================================
# 缓存配置
# ============================================
# 是否启用缓存
ENABLE_CACHE=true

# 默认缓存过期时间（秒）
DEFAULT_CACHE_TTL=3600

# 太阳位置计算缓存过期时间（秒）
SOLAR_POSITION_CACHE_TTL=86400

# 阴影计算缓存过期时间（秒）
SHADOW_CACHE_TTL=604800

# ============================================
# 性能配置
# ============================================
# Gunicorn worker数量
GUNICORN_WORKERS=2

# Gunicorn worker类型（sync, gevent, uvicorn.workers.UvicornWorker）
GUNICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker

# 最大请求数（worker重启前）
MAX_REQUESTS=10000

# 请求超时时间（秒）
REQUEST_TIMEOUT=60

# ============================================
# 监控配置
# ============================================
# 是否启用性能监控
ENABLE_PERFORMANCE_MONITORING=true

# 是否启用请求日志
ENABLE_REQUEST_LOGGING=true

# 慢查询阈值（秒）
SLOW_QUERY_THRESHOLD=1.0

# ============================================
# 中国城市数据配置
# ============================================
# 默认城市
DEFAULT_CITY=北京

# 默认城市代码（GB/T 2260）
DEFAULT_CITY_CODE=110000

# 城市数据文件路径
CITY_DATA_FILE=/app/data/cities.json

# ============================================
# 日照分析配置
# ============================================
# 大寒日日照标准（小时）
DACHAN_HAN_SOLSTICE_HOURS=2

# 冬至日日照标准（小时）
DONGZHI_SOLSTICE_HOURS=1

# 日照时间分析步长（分钟）
SUNSHINE_ANALYSIS_STEP=15

# ============================================
# 导出配置
# ============================================
# 导出文件临时目录
EXPORT_TEMP_DIR=/app/exports

# 导出文件过期时间（秒）
EXPORT_FILE_TTL=3600

# 最大导出记录数
MAX_EXPORT_RECORDS=10000
